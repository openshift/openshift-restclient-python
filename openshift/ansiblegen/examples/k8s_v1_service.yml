# v1_service.yml
---

tasks:
- create:
    name: myservice
    namespace: k8s-project
    spec_selector:
      app: django
    spec_ports:
      - port: 8765
        target_port: 8000
        name: http-port
    spec_type: ClusterIP
  name: Create service

- patch:
    name: myservice
    namespace: k8s-project
    spec_selector:
      app: django
      env: production
    spec_ports:
      - port: 8765
        target_port: 8010
        name: http-port
      - port: 8788
        target_port: 8080
        name: socket-port
    spec_type: ClusterIP
  name: Patch service

- create:
    name: myservice01
    namespace: k8s-project
    spec_selector:
      app_name: service_testing
      app_env: production
    spec_ports:
      - port: 8888
        target_port: 8010
        name: http
    spec_type: ClusterIP
  name: Create service

- patch:
    name: myservice01
    namespace: k8s-project
    spec_ports:
     - port: 9443
       target_port: 9443
       name: https
     - port: 8888
       target_port: 8015
       name: http
  name: Patch service

- replace:
    name: myservice01
    namespace: k8s-project
    spec_selector:
      app_name: web_site
      app_env: testing
    spec_ports:
     - port: 9999
       target_port: 9999
       name: https
     - port: 8080
       target_port: 8080
       name: http
    spec_type: NodePort
  name: Repace service
